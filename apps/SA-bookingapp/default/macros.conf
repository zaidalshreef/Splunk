#
# Macros for BookingApp searches
#

# =============================================================================
# Common Index/Sourcetype Filters
# =============================================================================
[bookingapp_api]
definition = index=apps sourcetype=nestjs:json
iseval = 0

[bookingapp_web]
definition = index=apps sourcetype=nextjs:log
iseval = 0

[bookingapp_db]
definition = index=apps sourcetype=postgresql:log
iseval = 0

[bookingapp_cache]
definition = index=apps sourcetype=redis:log
iseval = 0

[bookingapp_all]
definition = index=apps (sourcetype=nestjs:json OR sourcetype=nextjs:log OR sourcetype=postgresql:log OR sourcetype=redis:log)
iseval = 0

[bookingapp_docker]
definition = index=docker host=bookingapp
iseval = 0

# =============================================================================
# Error Detection Macros
# =============================================================================
[bookingapp_errors]
definition = `bookingapp_api` level=error
iseval = 0

[bookingapp_critical]
definition = `bookingapp_api` level=fatal OR level=critical
iseval = 0

# =============================================================================
# Performance Macros
# =============================================================================
[bookingapp_slow_requests(1)]
args = threshold_ms
definition = `bookingapp_api` duration>$threshold_ms$
iseval = 0

[bookingapp_db_slow_queries(1)]
args = threshold_ms
definition = `bookingapp_db` pg_duration>$threshold_ms$
iseval = 0

# =============================================================================
# Host Filter Macro
# =============================================================================
[bookingapp_host]
definition = host=bookingapp OR host=bookingapp*
iseval = 0

